---
import { getCollection } from "astro:content";

import Pill from "~/components/pill.astro";

const roles = await getCollection("roles");
---

<div class="flex flex-col gap-4 p-8 items-start">
  {
    roles
      .sort((a, b) => Number(b.data.start) - Number(a.data.start))
      .map((role) => (
        <div class="flex flex-col gap-1">
          <p class="flex gap-2 items-center">
            <span class="font-semibold">{role.data.title}</span>
            {!role.data?.end ? <Pill>Current</Pill> : null}
          </p>
          <p class="text-neutral-500">
            <span>{role.data.start}</span>
            {role.data?.end ? (
              <>
                <span>-</span>
                <span>{role.data.end}</span>
              </>
            ) : null}
            <span>@ {role.data.employer}</span>
          </p>
          <p class="flex items-center gap-2" />
          <p class="max-w-lg text-neutral-300">{role.data.summary}</p>
          <div class="flex items-center gap-2 whitespace-nowrap py-2" />
        </div>
      ))
  }
  <a
    class="rounded bg-emerald-700 px-4 py-3 font-medium text-white transition-all hover:bg-emerald-700"
    href="/resume.pdf"
    target="_blank">See my full resume</a
  >
</div>
